## Задание 33

### Пример задачи

Рассмотрим стандартный андроид-класс ImageView, отображающий изображения на экране.
Редактировать данный класс у нас нет возможности, так как он входит в стандартную библиотеку андроид.
Допустим, мы хотим расширить стандартное поведение этого класса, чтобы 
с помощью сторонней библиотеки загружалась картинка с сервера по ссылке.

### Исходный класс
```java
public class ImageView extends View {
    //...
}
```
### Решение с использованием словаря
Создадим словарь, который будет хранить URL изображений для каждого экземпляра ImageView. 
Добавим методы для установки и получения URL, а также для загрузки изображения.

```kotlin
// Словарь для хранения URL изображений
val imageViewImageMap = mutableMapOf<ImageView, String>()

// Функция для установки URL изображения
fun setImageUrl(imageView: ImageView, imageUrl: String) {
    imageViewImageMap[imageView] = imageUrl
}

// Функция для получения URL изображения
fun getImageUrl(imageView: ImageView): String? {
    return imageViewImageMap[imageView]
}

// Функция для загрузки изображения с использованием Glide
fun loadImage(imageView: ImageView) {
    val imageUrl = getImageUrl(imageView)
    imageUrl?.let {
        Glide.with(imageView)
            .load(it)
            .apply(RequestOptions().error(R.drawable.ic_image))
            .into(imageView)
    }
}

```
### Пример использования
```kotlin
val imageView1 = binding.imageView1
val imageView2 = binding.imageView2

// Устанавливаем URL изображений
setImageUrl(imageView1, "http://example.com/forest.png")
setImageUrl(imageView2, "http://example.com/castle.png")

// Загружаем изображения
loadImage(imageView1)
loadImage(imageView2)
```
### Упрощение или усложнение модели данных?

Данный подход имеет большие преимущества, но и несет за собой накладные расходы.

Упрощение:

Инкапсуляция логики: Логика загрузки изображений инкапсулирована в функциях, 
что делает код более читаемым и удобным для использования.

Расширяемость: Легко добавить новые свойства или методы, используя аналогичный подход со словарем.

Усложнение:

Словарь: Использование словаря для хранения URL изображений добавляет некоторую сложность, 
так как необходимо управлять дополнительной структурой данных.

Управление памятью: Необходимо следить за тем, чтобы объекты ImageView, 
которые больше не используются, удалялись из словаря, чтобы избежать утечек памяти.

### Выводы

В рабочих проектах добавить новое поведение к какому-либо проекту требуется регулярно. Благо,
котлин имеет возможность делать extension-функции, которые обладают практически идентичным механизмом.
Данное занятие позволило более глубоко понять смысл и реализацию данного способа
расширения поведения, теперь я могу спокойно реализовать это на любом другом языке, где нет такой
поддержки. Лично мне такой подход пришелся больше по душе, так как он позволяет добавить
поведение более элегантным и лаконичным способом, не прибегая к наследованию и созданию
иерархии объектов, со всеми вытекающими проблемами.