### Пример 2

#### Было

```kotlin
data class Power(private var value: Int) {
    fun increase(power: Power) {
        value += power.value
    }

    fun decrease(power: Power) {
        if (power.value >= value)
            value -= power.getActualValue()
    }

    fun getActualValue() = value

    companion object {
        const val MINIMUM_POWER = 0
    }
}
```

#### Стало

```kotlin
sealed interface PowerState {
    
    data class FullPower(private val value: Int): PowerState {
        fun increase(value: Int): PowerState = FullPower(this.value + value)

        fun decrease(value: Int): PowerState {
            return if (value >= this.value)
                EmptyPower
            else FullPower(this.value - value)
        }

        fun getActualValue() = value
    }

    data object EmptyPower: PowerState
}

data class Power(private val value: Int) {
    var state: PowerState = PowerState.FullPower(value)
        private set

    fun increase(value: Int) {
        state = when (state) {
            is PowerState.FullPower -> (state as PowerState.FullPower).increase(value)
            is PowerState.EmptyPower -> PowerState.EmptyPower
        }
    }

    fun decrease(value: Int) {
        state = when (state) {
            is PowerState.FullPower -> (state as PowerState.FullPower).decrease(value)
            is PowerState.EmptyPower -> PowerState.EmptyPower
        }
    }
}
```